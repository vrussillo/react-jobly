{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n/** API Class.\n *\n * Static class tying together methods used to get/send to to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */\n\nclass JoblyApi {\n  // the token for interactive with the API will be stored here.\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"get\";\n    console.debug(\"API Call:\", endpoint, data, method);\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${JoblyApi.token}`\n    };\n    const params = method === \"get\" ? data : {};\n\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  } // Individual API routes\n\n  /** Get the current user. */\n\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n  /** Get companies (filtered by name if not undefined) */\n\n\n  static async getCompanies(name) {\n    let res = await this.request(\"companies\", {\n      name\n    });\n    return res.companies;\n  }\n  /** Get details on a company by handle. */\n\n\n  static async getCompany(handle) {\n    let res = await this.request(`companies/${handle}`);\n    return res.company;\n  }\n  /** Get list of jobs (filtered by title if not undefined) */\n\n\n  static async getJobs(title) {\n    let res = await this.request(\"jobs\", {\n      title\n    });\n    return res.jobs;\n  }\n  /** Apply to a job */\n\n\n  static async applyToJob(username, id) {\n    await this.request(`users/${username}/jobs/${id}`, {}, \"post\");\n  }\n  /** Get token for login from username, password. */\n\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n  /** Signup for site. */\n\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n  /** Save user profile page. */\n\n\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, \"patch\");\n    return res.user;\n  }\n\n}\n\nexport default JoblyApi;","map":{"version":3,"sources":["/Users/vaughnrussillo/SpringBoard_Projects/react/react-jobly/src/api/api.js"],"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","JoblyApi","request","endpoint","data","method","console","debug","url","headers","Authorization","token","params","err","error","response","message","Array","isArray","getCurrentUser","username","res","user","getCompanies","name","companies","getCompany","handle","company","getJobs","title","jobs","applyToJob","id","login","signup","saveProfile"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,IAAkC,uBAAnD;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,QAAN,CAAe;AACb;AAGoB,eAAPC,OAAO,CAACC,QAAD,EAAsC;AAAA,QAA3BC,IAA2B,uEAApB,EAAoB;AAAA,QAAhBC,MAAgB,uEAAP,KAAO;AACxDC,IAAAA,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2BJ,QAA3B,EAAqCC,IAArC,EAA2CC,MAA3C;AAEA,UAAMG,GAAG,GAAI,GAAEX,QAAS,IAAGM,QAAS,EAApC;AACA,UAAMM,OAAO,GAAG;AAAEC,MAAAA,aAAa,EAAG,UAAST,QAAQ,CAACU,KAAM;AAA1C,KAAhB;AACA,UAAMC,MAAM,GAAIP,MAAM,KAAK,KAAZ,GACTD,IADS,GAET,EAFN;;AAIA,QAAI;AACF,aAAO,CAAC,MAAMR,KAAK,CAAC;AAAEY,QAAAA,GAAF;AAAOH,QAAAA,MAAP;AAAeD,QAAAA,IAAf;AAAqBQ,QAAAA,MAArB;AAA6BH,QAAAA;AAA7B,OAAD,CAAZ,EAAsDL,IAA7D;AACD,KAFD,CAEE,OAAOS,GAAP,EAAY;AACZP,MAAAA,OAAO,CAACQ,KAAR,CAAc,YAAd,EAA4BD,GAAG,CAACE,QAAhC;AACA,UAAIC,OAAO,GAAGH,GAAG,CAACE,QAAJ,CAAaX,IAAb,CAAkBU,KAAlB,CAAwBE,OAAtC;AACA,YAAMC,KAAK,CAACC,OAAN,CAAcF,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CAAzC;AACD;AACF,GApBY,CAsBb;;AAEA;;;AAE2B,eAAdG,cAAc,CAACC,QAAD,EAAW;AACpC,QAAIC,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,EAA/B,CAAhB;AACA,WAAOC,GAAG,CAACC,IAAX;AACD;AAED;;;AAEyB,eAAZC,YAAY,CAACC,IAAD,EAAO;AAC9B,QAAIH,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAa,WAAb,EAA0B;AAAEsB,MAAAA;AAAF,KAA1B,CAAhB;AACA,WAAOH,GAAG,CAACI,SAAX;AACD;AAED;;;AAEuB,eAAVC,UAAU,CAACC,MAAD,EAAS;AAC9B,QAAIN,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,aAAYyB,MAAO,EAAjC,CAAhB;AACA,WAAON,GAAG,CAACO,OAAX;AACD;AAED;;;AAEoB,eAAPC,OAAO,CAACC,KAAD,EAAQ;AAC1B,QAAIT,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAa,MAAb,EAAqB;AAAE4B,MAAAA;AAAF,KAArB,CAAhB;AACA,WAAOT,GAAG,CAACU,IAAX;AACD;AAED;;;AAEuB,eAAVC,UAAU,CAACZ,QAAD,EAAWa,EAAX,EAAe;AACpC,UAAM,KAAK/B,OAAL,CAAc,SAAQkB,QAAS,SAAQa,EAAG,EAA1C,EAA6C,EAA7C,EAAiD,MAAjD,CAAN;AACD;AAED;;;AAEkB,eAALC,KAAK,CAAC9B,IAAD,EAAO;AACvB,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,YAAd,EAA2BE,IAA3B,EAAiC,MAAjC,CAAhB;AACA,WAAOiB,GAAG,CAACV,KAAX;AACD;AAED;;;AAEmB,eAANwB,MAAM,CAAC/B,IAAD,EAAO;AACxB,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,eAAd,EAA8BE,IAA9B,EAAoC,MAApC,CAAhB;AACA,WAAOiB,GAAG,CAACV,KAAX;AACD;AAED;;;AAEwB,eAAXyB,WAAW,CAAChB,QAAD,EAAWhB,IAAX,EAAiB;AACvC,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,EAA/B,EAAkChB,IAAlC,EAAwC,OAAxC,CAAhB;AACA,WAAOiB,GAAG,CAACC,IAAX;AACD;;AA7EY;;AAiFf,eAAerB,QAAf","sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n\n/** API Class.\n *\n * Static class tying together methods used to get/send to to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */\n\nclass JoblyApi {\n  // the token for interactive with the API will be stored here.\n  static token;\n\n  static async request(endpoint, data = {}, method = \"get\") {\n    console.debug(\"API Call:\", endpoint, data, method);\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${JoblyApi.token}` };\n    const params = (method === \"get\")\n        ? data\n        : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n\n  /** Get the current user. */\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  /** Get companies (filtered by name if not undefined) */\n\n  static async getCompanies(name) {\n    let res = await this.request(\"companies\", { name });\n    return res.companies;\n  }\n\n  /** Get details on a company by handle. */\n\n  static async getCompany(handle) {\n    let res = await this.request(`companies/${handle}`);\n    return res.company;\n  }\n\n  /** Get list of jobs (filtered by title if not undefined) */\n\n  static async getJobs(title) {\n    let res = await this.request(\"jobs\", { title });\n    return res.jobs;\n  }\n\n  /** Apply to a job */\n\n  static async applyToJob(username, id) {\n    await this.request(`users/${username}/jobs/${id}`, {}, \"post\");\n  }\n\n  /** Get token for login from username, password. */\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n\n  /** Signup for site. */\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n\n  /** Save user profile page. */\n\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, \"patch\");\n    return res.user;\n  }\n}\n\n\nexport default JoblyApi;\n"]},"metadata":{},"sourceType":"module"}